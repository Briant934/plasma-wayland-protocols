<?xml version="1.0" encoding="UTF-8"?>
<protocol name="blur_unstable_v1">
  <copyright>
    SPDX-FileCopyrightText: 2015 Martin Gräßlin
    SPDX-FileCopyrightText: 2015 Marco Martin
    SPDX-FileCopyrightText: 2020 Vlad Zahorodnii
    SPDX-License-Identifier: LGPL-2.1-or-later
  </copyright>

  <interface name="zkde_blur_manager_v1" version="1">
    <description summary="blur object factory">
      The global interface that provides a way to specify the region behind
      a wl_surface that needs to be blurred by the compositor.

      Warning! The protocol described in this file is experimental and
      backward incompatible changes may be made. Backward compatible changes
      may be added together with the corresponding interface version bump.
      Backward incompatible changes are done by bumping the version number in
      the protocol and interface names and resetting the interface version.
      Once the protocol is to be declared stable, the 'z' prefix and the
      version number in the protocol and interface names are removed and the
      interface version number is reset.
    </description>

    <request name="destroy" type="destructor">
      Informs the server that the client will no longer be using this
      protocol object. Existing objects created by this object are not
      affected.
    </request>

    <enum name="error">
      <entry name="blur_exists" value="0"
             summary="the surface has already a blur object associated"/>
    </enum>

    <request name="get_blur">
      <description summary="get a blur object">
        Instantiate an interface extension for the given wl_surface to
        blur background behind it. If the given wl_surface already has
        a zkde_blur_v1 object associated, the blur_exists protocol error
        will be raised.
      </description>
      <arg name="id" type="new_id" interface="zkde_blur_v1"
           summary="the new zkde_blur_v1 object"/>
      <arg name="surface" type="object" interface="wl_surface"
           summary="the surface"/>
    </request>
  </interface>

  <interface name="zkde_blur_v1" version="1">
    <description summary="blur object for a surface">
      The blur object provides a way to indicate the region behind the
      wl_surface that should be blurred.

      If the wl_surface associated with the zkde_blur_v1 object has been
      destroyed, all requests but "destroy" will raise the protocol error
      no_surface.

      If the zkde_blur_v1 object is destroyed, the blur region will be
      unset. The change will take its place on the next commit.
    </description>

    <request name="destroy" type="destructor">
      <description summary="release the blur object">
        Informs the server that the client will no longer be using this
        protocol object. The blur region will be unset on the next commit.
      </description>
    </request>

    <enum name="error">
      <entry name="no_surface" value="0"
             summary="the associated wl_surface was destroyed"/>
    </enum>

    <request name="set_region">
      <description summary="set or unset the blur region">
        This request sets the region of the surface that will have its
        background blurred.

        The blur region is specified in the surface-local coordinates.

        The initial value for the blur region is infinite. That means the
        whole background behind the surface will be blurred. Setting the
        pending blur region has copy semantics, and the wl_region object
        can be destroyed immediately. A NULL wl_region causes the blur
        region to be set to infinite.

        The blur region is double-buffered state, and will be applied on
        the next wl_surface.commit.

        It is up to the compositor to decide how the background is going
        to be blurred.
      </description>
      <arg name="region" type="object" interface="wl_region" allow-null="true"
           summary="blur region of the surface"/>
    </request>
  </interface>
</protocol>
